<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Elementle</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 20px;
    }
    #periodicTable {
      margin: 0 auto 20px auto;
      /* Simplified grid: 9 rows x 18 columns 
         (top 7 for main table; row 8 & 9 for lanthanides & actinides) */
      display: grid;
      grid-template-rows: repeat(9, 30px);
      grid-template-columns: repeat(18, 30px);
      gap: 3px;
      justify-content: center;
    }
    .element-square {
      width: 30px;
      height: 30px;
      background-color: gray;
    }
    /* The hidden “f-block” squares are placed in row 8 & 9 below the main body */
    .answer-square {
      background-color: black !important;
    }
    #game {
      margin: 20px auto;
      max-width: 600px;
    }
    .row {
      display: flex;
      justify-content: center;
      margin: 5px 0;
    }
    .cell {
      width: 120px;
      height: 40px;
      border: 1px solid #ccc;
      margin: 2px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
    }
    .correct {
      background-color: #6aaa64;
      color: white;
    }
    .wrong {
      background-color: #787c7e;
      color: white;
    }
    #input {
      margin: 20px 0;
    }
    #message {
      font-size: 18px;
      margin-top: 10px;
    }
    #shareButton {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1>Elementle</h1>
  <p>Guess the element in 6 tries! Clues: Atomic # (↑ or ↓), Symbol match, Group, Period.</p>

  <!-- 1) Blank periodic table (gray) plus black square for the answer -->
  <div id="periodicTable"></div>

  <!-- 2) The standard guessing interface -->
  <div id="game"></div>
  <div id="input">
    <input type="text" id="guessInput" placeholder="Enter element name" list="elementNames">
    <button onclick="submitGuess()">Submit</button>
    <datalist id="elementNames"></datalist>
  </div>
  <div id="message"></div>

  <script>
    /************************************************************************
     * 1. PERIODIC TABLE DATA
     ************************************************************************/
    const elements = [
      { name: "Hydrogen", symbol: "H", atomicNumber: 1, group: 1, period: 1 },
      { name: "Helium", symbol: "He", atomicNumber: 2, group: 18, period: 1 },
      { name: "Lithium", symbol: "Li", atomicNumber: 3, group: 1, period: 2 },
      { name: "Beryllium", symbol: "Be", atomicNumber: 4, group: 2, period: 2 },
      { name: "Boron", symbol: "B", atomicNumber: 5, group: 13, period: 2 },
      { name: "Carbon", symbol: "C", atomicNumber: 6, group: 14, period: 2 },
      { name: "Nitrogen", symbol: "N", atomicNumber: 7, group: 15, period: 2 },
      { name: "Oxygen", symbol: "O", atomicNumber: 8, group: 16, period: 2 },
      { name: "Fluorine", symbol: "F", atomicNumber: 9, group: 17, period: 2 },
      { name: "Neon", symbol: "Ne", atomicNumber: 10, group: 18, period: 2 },
      { name: "Sodium", symbol: "Na", atomicNumber: 11, group: 1, period: 3 },
      { name: "Magnesium", symbol: "Mg", atomicNumber: 12, group: 2, period: 3 },
      { name: "Aluminum", symbol: "Al", atomicNumber: 13, group: 13, period: 3 },
      { name: "Silicon", symbol: "Si", atomicNumber: 14, group: 14, period: 3 },
      { name: "Phosphorus", symbol: "P", atomicNumber: 15, group: 15, period: 3 },
      { name: "Sulfur", symbol: "S", atomicNumber: 16, group: 16, period: 3 },
      { name: "Chlorine", symbol: "Cl", atomicNumber: 17, group: 17, period: 3 },
      { name: "Argon", symbol: "Ar", atomicNumber: 18, group: 18, period: 3 },
      { name: "Potassium", symbol: "K", atomicNumber: 19, group: 1, period: 4 },
      { name: "Calcium", symbol: "Ca", atomicNumber: 20, group: 2, period: 4 },
      { name: "Scandium", symbol: "Sc", atomicNumber: 21, group: 3, period: 4 },
      { name: "Titanium", symbol: "Ti", atomicNumber: 22, group: 4, period: 4 },
      { name: "Vanadium", symbol: "V", atomicNumber: 23, group: 5, period: 4 },
      { name: "Chromium", symbol: "Cr", atomicNumber: 24, group: 6, period: 4 },
      { name: "Manganese", symbol: "Mn", atomicNumber: 25, group: 7, period: 4 },
      { name: "Iron", symbol: "Fe", atomicNumber: 26, group: 8, period: 4 },
      { name: "Cobalt", symbol: "Co", atomicNumber: 27, group: 9, period: 4 },
      { name: "Nickel", symbol: "Ni", atomicNumber: 28, group: 10, period: 4 },
      { name: "Copper", symbol: "Cu", atomicNumber: 29, group: 11, period: 4 },
      { name: "Zinc", symbol: "Zn", atomicNumber: 30, group: 12, period: 4 },
      { name: "Gallium", symbol: "Ga", atomicNumber: 31, group: 13, period: 4 },
      { name: "Germanium", symbol: "Ge", atomicNumber: 32, group: 14, period: 4 },
      { name: "Arsenic", symbol: "As", atomicNumber: 33, group: 15, period: 4 },
      { name: "Selenium", symbol: "Se", atomicNumber: 34, group: 16, period: 4 },
      { name: "Bromine", symbol: "Br", atomicNumber: 35, group: 17, period: 4 },
      { name: "Krypton", symbol: "Kr", atomicNumber: 36, group: 18, period: 4 },
      { name: "Rubidium", symbol: "Rb", atomicNumber: 37, group: 1, period: 5 },
      { name: "Strontium", symbol: "Sr", atomicNumber: 38, group: 2, period: 5 },
      { name: "Yttrium", symbol: "Y", atomicNumber: 39, group: 3, period: 5 },
      { name: "Zirconium", symbol: "Zr", atomicNumber: 40, group: 4, period: 5 },
      { name: "Niobium", symbol: "Nb", atomicNumber: 41, group: 5, period: 5 },
      { name: "Molybdenum", symbol: "Mo", atomicNumber: 42, group: 6, period: 5 },
      { name: "Technetium", symbol: "Tc", atomicNumber: 43, group: 7, period: 5 },
      { name: "Ruthenium", symbol: "Ru", atomicNumber: 44, group: 8, period: 5 },
      { name: "Rhodium", symbol: "Rh", atomicNumber: 45, group: 9, period: 5 },
      { name: "Palladium", symbol: "Pd", atomicNumber: 46, group: 10, period: 5 },
      { name: "Silver", symbol: "Ag", atomicNumber: 47, group: 11, period: 5 },
      { name: "Cadmium", symbol: "Cd", atomicNumber: 48, group: 12, period: 5 },
      { name: "Indium", symbol: "In", atomicNumber: 49, group: 13, period: 5 },
      { name: "Tin", symbol: "Sn", atomicNumber: 50, group: 14, period: 5 },
      { name: "Antimony", symbol: "Sb", atomicNumber: 51, group: 15, period: 5 },
      { name: "Tellurium", symbol: "Te", atomicNumber: 52, group: 16, period: 5 },
      { name: "Iodine", symbol: "I", atomicNumber: 53, group: 17, period: 5 },
      { name: "Xenon", symbol: "Xe", atomicNumber: 54, group: 18, period: 5 },
      { name: "Cesium", symbol: "Cs", atomicNumber: 55, group: 1, period: 6 },
      { name: "Barium", symbol: "Ba", atomicNumber: 56, group: 2, period: 6 },
      { name: "Lanthanum", symbol: "La", atomicNumber: 57, group: 3, period: 6 },
      { name: "Cerium", symbol: "Ce", atomicNumber: 58, group: 3, period: 6 },
      { name: "Praseodymium", symbol: "Pr", atomicNumber: 59, group: 3, period: 6 },
      { name: "Neodymium", symbol: "Nd", atomicNumber: 60, group: 3, period: 6 },
      { name: "Promethium", symbol: "Pm", atomicNumber: 61, group: 3, period: 6 },
      { name: "Samarium", symbol: "Sm", atomicNumber: 62, group: 3, period: 6 },
      { name: "Europium", symbol: "Eu", atomicNumber: 63, group: 3, period: 6 },
      { name: "Gadolinium", symbol: "Gd", atomicNumber: 64, group: 3, period: 6 },
      { name: "Terbium", symbol: "Tb", atomicNumber: 65, group: 3, period: 6 },
      { name: "Dysprosium", symbol: "Dy", atomicNumber: 66, group: 3, period: 6 },
      { name: "Holmium", symbol: "Ho", atomicNumber: 67, group: 3, period: 6 },
      { name: "Erbium", symbol: "Er", atomicNumber: 68, group: 3, period: 6 },
      { name: "Thulium", symbol: "Tm", atomicNumber: 69, group: 3, period: 6 },
      { name: "Ytterbium", symbol: "Yb", atomicNumber: 70, group: 3, period: 6 },
      { name: "Lutetium", symbol: "Lu", atomicNumber: 71, group: 3, period: 6 },
      { name: "Hafnium", symbol: "Hf", atomicNumber: 72, group: 4, period: 6 },
      { name: "Tantalum", symbol: "Ta", atomicNumber: 73, group: 5, period: 6 },
      { name: "Tungsten", symbol: "W", atomicNumber: 74, group: 6, period: 6 },
      { name: "Rhenium", symbol: "Re", atomicNumber: 75, group: 7, period: 6 },
      { name: "Osmium", symbol: "Os", atomicNumber: 76, group: 8, period: 6 },
      { name: "Iridium", symbol: "Ir", atomicNumber: 77, group: 9, period: 6 },
      { name: "Platinum", symbol: "Pt", atomicNumber: 78, group: 10, period: 6 },
      { name: "Gold", symbol: "Au", atomicNumber: 79, group: 11, period: 6 },
      { name: "Mercury", symbol: "Hg", atomicNumber: 80, group: 12, period: 6 },
      { name: "Thallium", symbol: "Tl", atomicNumber: 81, group: 13, period: 6 },
      { name: "Lead", symbol: "Pb", atomicNumber: 82, group: 14, period: 6 },
      { name: "Bismuth", symbol: "Bi", atomicNumber: 83, group: 15, period: 6 },
      { name: "Polonium", symbol: "Po", atomicNumber: 84, group: 16, period: 6 },
      { name: "Astatine", symbol: "At", atomicNumber: 85, group: 17, period: 6 },
      { name: "Radon", symbol: "Rn", atomicNumber: 86, group: 18, period: 6 },
      { name: "Francium", symbol: "Fr", atomicNumber: 87, group: 1, period: 7 },
      { name: "Radium", symbol: "Ra", atomicNumber: 88, group: 2, period: 7 },
      { name: "Actinium", symbol: "Ac", atomicNumber: 89, group: 3, period: 7 },
      { name: "Thorium", symbol: "Th", atomicNumber: 90, group: 3, period: 7 },
      { name: "Protactinium", symbol: "Pa", atomicNumber: 91, group: 3, period: 7 },
      { name: "Uranium", symbol: "U", atomicNumber: 92, group: 3, period: 7 },
      { name: "Neptunium", symbol: "Np", atomicNumber: 93, group: 3, period: 7 },
      { name: "Plutonium", symbol: "Pu", atomicNumber: 94, group: 3, period: 7 },
      { name: "Americium", symbol: "Am", atomicNumber: 95, group: 3, period: 7 },
      { name: "Curium", symbol: "Cm", atomicNumber: 96, group: 3, period: 7 },
      { name: "Berkelium", symbol: "Bk", atomicNumber: 97, group: 3, period: 7 },
      { name: "Californium", symbol: "Cf", atomicNumber: 98, group: 3, period: 7 },
      { name: "Einsteinium", symbol: "Es", atomicNumber: 99, group: 3, period: 7 },
      { name: "Fermium", symbol: "Fm", atomicNumber: 100, group: 3, period: 7 },
      { name: "Mendelevium", symbol: "Md", atomicNumber: 101, group: 3, period: 7 },
      { name: "Nobelium", symbol: "No", atomicNumber: 102, group: 3, period: 7 },
      { name: "Lawrencium", symbol: "Lr", atomicNumber: 103, group: 3, period: 7 },
      { name: "Rutherfordium", symbol: "Rf", atomicNumber: 104, group: 4, period: 7 },
      { name: "Dubnium", symbol: "Db", atomicNumber: 105, group: 5, period: 7 },
      { name: "Seaborgium", symbol: "Sg", atomicNumber: 106, group: 6, period: 7 },
      { name: "Bohrium", symbol: "Bh", atomicNumber: 107, group: 7, period: 7 },
      { name: "Hassium", symbol: "Hs", atomicNumber: 108, group: 8, period: 7 },
      { name: "Meitnerium", symbol: "Mt", atomicNumber: 109, group: 9, period: 7 },
      { name: "Darmstadtium", symbol: "Ds", atomicNumber: 110, group: 10, period: 7 },
      { name: "Roentgenium", symbol: "Rg", atomicNumber: 111, group: 11, period: 7 },
      { name: "Copernicium", symbol: "Cn", atomicNumber: 112, group: 12, period: 7 },
      { name: "Nihonium", symbol: "Nh", atomicNumber: 113, group: 13, period: 7 },
      { name: "Flerovium", symbol: "Fl", atomicNumber: 114, group: 14, period: 7 },
      { name: "Moscovium", symbol: "Mc", atomicNumber: 115, group: 15, period: 7 },
      { name: "Livermorium", symbol: "Lv", atomicNumber: 116, group: 16, period: 7 },
      { name: "Tennessine", symbol: "Ts", atomicNumber: 117, group: 17, period: 7 },
      { name: "Oganesson", symbol: "Og", atomicNumber: 118, group: 18, period: 7 }
    ];

    // A simple map from atomicNumber -> row/column for the table (approximate).
    // Lanthanides in row 8, actinides in row 9, etc.
    const tablePositions = {
      1:  {r:1, c:1},    2:  {r:1, c:18},
      3:  {r:2, c:1},    4:  {r:2, c:2},  5:  {r:2, c:13}, 6:  {r:2, c:14},
      7:  {r:2, c:15},   8:  {r:2, c:16}, 9:  {r:2, c:17}, 10: {r:2, c:18},
      11: {r:3, c:1},    12: {r:3, c:2}, 13: {r:3, c:13}, 14: {r:3, c:14},
      15: {r:3, c:15},   16: {r:3, c:16}, 17: {r:3, c:17}, 18: {r:3, c:18},
      19: {r:4, c:1},    20: {r:4, c:2}, 21: {r:4, c:3},  22: {r:4, c:4},
      23: {r:4, c:5},    24: {r:4, c:6}, 25: {r:4, c:7},  26: {r:4, c:8},
      27: {r:4, c:9},    28: {r:4, c:10},29: {r:4, c:11}, 30: {r:4, c:12},
      31: {r:4, c:13},   32: {r:4, c:14},33: {r:4, c:15}, 34: {r:4, c:16},
      35: {r:4, c:17},   36: {r:4, c:18},
      37: {r:5, c:1},    38: {r:5, c:2}, 39: {r:5, c:3},  40: {r:5, c:4},
      41: {r:5, c:5},    42: {r:5, c:6}, 43: {r:5, c:7},  44: {r:5, c:8},
      45: {r:5, c:9},    46: {r:5, c:10},47: {r:5, c:11}, 48: {r:5, c:12},
      49: {r:5, c:13},   50: {r:5, c:14},51: {r:5, c:15}, 52: {r:5, c:16},
      53: {r:5, c:17},   54: {r:5, c:18},
      55: {r:6, c:1},    56: {r:6, c:2}, 
      // Lanthanides => row 8
      57: {r:8, c:3},    58: {r:8, c:4}, 59: {r:8, c:5}, 60: {r:8, c:6},
      61: {r:8, c:7},    62: {r:8, c:8}, 63: {r:8, c:9}, 64: {r:8, c:10},
      65: {r:8, c:11},   66: {r:8, c:12},67: {r:8, c:13},68: {r:8, c:14},
      69: {r:8, c:15},   70: {r:8, c:16},71: {r:8, c:17},
      72: {r:6, c:4},    73: {r:6, c:5}, 74: {r:6, c:6}, 75: {r:6, c:7},
      76: {r:6, c:8},    77: {r:6, c:9}, 78: {r:6, c:10},79: {r:6, c:11},
      80: {r:6, c:12},   81: {r:6, c:13},82: {r:6, c:14},83: {r:6, c:15},
      84: {r:6, c:16},   85: {r:6, c:17},86: {r:6, c:18},
      87: {r:7, c:1},    88: {r:7, c:2},
      // Actinides => row 9
      89: {r:9, c:3},    90: {r:9, c:4}, 91: {r:9, c:5}, 92: {r:9, c:6},
      93: {r:9, c:7},    94: {r:9, c:8}, 95: {r:9, c:9}, 96: {r:9, c:10},
      97: {r:9, c:11},   98: {r:9, c:12},99: {r:9, c:13},100:{r:9, c:14},
      101:{r:9, c:15},   102:{r:9, c:16},103:{r:9, c:17},
      104:{r:7, c:4},    105:{r:7, c:5}, 106:{r:7, c:6}, 107:{r:7, c:7},
      108:{r:7, c:8},    109:{r:7, c:9}, 110:{r:7, c:10},111:{r:7, c:11},
      112:{r:7, c:12},   113:{r:7, c:13},114:{r:7, c:14},115:{r:7, c:15},
      116:{r:7, c:16},   117:{r:7, c:17},118:{r:7, c:18}
    };

    // Pick a random element as the answer
    const answer = elements[Math.floor(Math.random() * elements.length)];
    let attempts = 0;
    const maxAttempts = 6;
    let guessHistory = [];

    /************************************************************************
     * 2. ON PAGE LOAD: Build the table & fill datalist
     ************************************************************************/
    document.addEventListener('DOMContentLoaded', () => {
      // Build the auto-complete <datalist>
      const dataList = document.getElementById('elementNames');
      elements.forEach(e => {
        const option = document.createElement('option');
        option.value = e.name;
        dataList.appendChild(option);
      });

      // Build and display the “blank” table, black square for the answer
      renderPeriodicTable();
    });

    /************************************************************************
     * 3. RENDERING THE BLANK PERIODIC TABLE
     ************************************************************************/
    function renderPeriodicTable() {
      const tableDiv = document.getElementById("periodicTable");

      for (let i = 1; i <= 118; i++) {
        const pos = tablePositions[i];
        if (!pos) continue; // skip if no position (just in case)
        const square = document.createElement("div");
        square.classList.add("element-square");
        // Store atomicNumber in a data- attribute so we can find it easily
        square.dataset.atomicNumber = i;
        // Position in grid
        square.style.gridRow = pos.r;
        square.style.gridColumn = pos.c;
        tableDiv.appendChild(square);

        // If this is the “answer” element, color it black from the start
        if (i === answer.atomicNumber) {
          square.classList.add("answer-square");
        }
      }
    }

    /************************************************************************
     * 4. GUESS LOGIC
     ************************************************************************/
    function submitGuess() {
      const guessInput = document.getElementById('guessInput');
      const guessName = guessInput.value.trim();
      if (!guessName) return;

      attempts++;
      const guessedElement = elements.find(e =>
        e.name.toLowerCase() === guessName.toLowerCase()
      );
      if (!guessedElement) {
        document.getElementById('message').textContent = "Element not found!";
        return;
      }

      // Compare with answer
      let numberHint = "";
      let numberColor = "wrong";
      if (guessedElement.atomicNumber === answer.atomicNumber) {
        numberHint = "=";
        numberColor = "correct";
      } else if (guessedElement.atomicNumber > answer.atomicNumber) {
        numberHint = "↓";
      } else {
        numberHint = "↑";
      }

      let symbolColor = (guessedElement.symbol === answer.symbol) ? "correct" : "wrong";
      let groupColor  = (guessedElement.group  === answer.group) ? "correct" : "wrong";
      let periodColor = (guessedElement.period === answer.period) ? "correct" : "wrong";

      const feedback = {
        numberHint,
        numberColor,
        symbolColor,
        groupColor,
        periodColor
      };

      guessHistory.push({ guessObj: guessedElement, feedback });
      addRowFeedback(guessedElement, feedback);

      // If incorrect guess => color that square dark red (unless it's the answer)
      if (guessedElement.atomicNumber !== answer.atomicNumber) {
        markWrongGuess(guessedElement.atomicNumber);
      }

      // Check for correct / out of tries
      if (guessedElement.atomicNumber === answer.atomicNumber) {
        document.getElementById('message').textContent =
          "Correct! The element was " + answer.name + ".";
        guessInput.disabled = true;
        showShareButton();
      } else if (attempts >= maxAttempts) {
        document.getElementById('message').textContent =
          "Out of tries! The correct element was " + answer.name + ".";
        guessInput.disabled = true;
        showShareButton();
      } else {
        document.getElementById('message').textContent =
          `Try #${attempts} of ${maxAttempts}. Keep guessing!`;
      }

      guessInput.value = "";
      guessInput.focus();
    }

    function addRowFeedback(guessObj, feedback) {
      const gameDiv = document.getElementById("game");
      const rowDiv = document.createElement("div");
      rowDiv.className = "row";

      // Name cell
      const nameCell = document.createElement("div");
      nameCell.className = "cell";
      nameCell.textContent = guessObj.name;
      rowDiv.appendChild(nameCell);

      // Atomic number feedback
      const numberCell = document.createElement("div");
      numberCell.className = "cell " + feedback.numberColor;
      numberCell.textContent = feedback.numberHint;
      rowDiv.appendChild(numberCell);

      // Symbol feedback
      const symbolCell = document.createElement("div");
      symbolCell.className = "cell " + feedback.symbolColor;
      symbolCell.textContent = guessObj.symbol;
      rowDiv.appendChild(symbolCell);

      // Group feedback
      const groupCell = document.createElement("div");
      groupCell.className = "cell " + feedback.groupColor;
      groupCell.textContent = "G" + guessObj.group;
      rowDiv.appendChild(groupCell);

      // Period feedback
      const periodCell = document.createElement("div");
      periodCell.className = "cell " + feedback.periodColor;
      periodCell.textContent = "P" + guessObj.period;
      rowDiv.appendChild(periodCell);

      gameDiv.appendChild(rowDiv);
    }

    /************************************************************************
     * 5. COLORING INCORRECT GUESSES ON THE TABLE
     ************************************************************************/
    function markWrongGuess(atomicNumber) {
      // Find the corresponding square
      const selector = '#periodicTable .element-square[data-atomic-number="' + atomicNumber + '"]';
      const square = document.querySelector(selector);
      // If the square isn't also the answer, color it dark red
      if (square && !square.classList.contains('answer-square')) {
        square.style.backgroundColor = 'darkred';
      }
    }

    /************************************************************************
     * 6. SHARE BUTTON
     ************************************************************************/
    function showShareButton() {
      if (document.getElementById("shareButton")) return;
      const shareBtn = document.createElement('button');
      shareBtn.id = "shareButton";
      shareBtn.textContent = "Share Results";
      shareBtn.addEventListener('click', shareResults);
      document.getElementById('message').appendChild(shareBtn);
    }

    function shareResults() {
      let summary = `Elementle ${attempts <= maxAttempts ? attempts : "X"}/${maxAttempts}\n\n`;
      
      guessHistory.forEach(data => {
        const fb = data.feedback;
        let numberEmoji =
          (fb.numberColor === "correct") ? "🟩"
            : (fb.numberHint === "↓" ? "⬇️" : "⬆️");
        let symbolEmoji = (fb.symbolColor === "correct") ? "🟩" : "⬜";
        let groupEmoji  = (fb.groupColor  === "correct") ? "🟩" : "⬜";
        let periodEmoji = (fb.periodColor === "correct") ? "🟩" : "⬜";
        summary += `${numberEmoji}${symbolEmoji}${groupEmoji}${periodEmoji}\n`;
      });

      // Add a blank line and the URL
      summary += `\nPlay here: https://getkrakengames.github.io/Elementle/\n`;

      navigator.clipboard.writeText(summary)
        .then(() => alert("Results copied to clipboard!"))
        .catch(err => console.error("Clipboard error:", err));
    }
  </script>
</body>
</html>
